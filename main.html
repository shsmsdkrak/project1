<!DOCTYPE html>
<html>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width initial-scale=1'>
        <script src="js/page.js"></script>
        <script src="js/control.js"></script>
        <title>메인</title>
    </head>

    <body>
        <script>
            var body = document.body;

            function getCreateElement(type) {
                return document.createElement(type);
            }

            function setAttr(target, type, value) {
                target.setAttribute(type, value);
            }

            function setEventBinding(target, type, func) {
                target.addEventListener(type, func);
            }

            var contents = getCreateElement("div");
            setAttr(contents, "class", "contents");

            var control = getCreateElement("div");
            setAttr(control, "id", "code01");

            var input01 = getCreateElement("input");
            setEventBinding(input01, "dblclick", function (e) {
                window.open("popup1.html?val=" + e.target.tagName, "popup1", "width=500, height=300");
            });
            control.appendChild(input01);

            var button01 = getCreateElement("button");
            button01.innerText = "search1";
            setAttr(button01, "type", "button");
            setEventBinding(button01, "click", function (e) {
                window.open("popup1.html?val=" + e.target.tagName, "popup1", "width=500, height=300");
            });
            control.appendChild(button01);

            var input02 = getCreateElement("input");
            setAttr(input02, "readonly", "readonly");
            control.appendChild(input02);

            contents.appendChild(control);
            body.appendChild(contents);



            function getDatadd(search) {
                var obj = {};
                var uri = decodeURI(search);
                uri = uri.slice(1, uri.length);

                var param = uri.split("&");

                for (var i = 0; i < param.length; i++) {
                    var devide = param[i].split("=");
                    obj[devide[0]] = devide[1];
                }

                return obj;
            }

            window.onload = function () {
                var search = window.location.search;
                var getData = getDatadd(search);

            }

            




            // var page = new Page({
            //     oninitContents: function (contents) {
            //         var code01 = new Control([
            //             {
            //                 type: "input",
            //                 state: {
            //                     id: "input01",
            //                     type: "text",
            //                     value: "",
            //                     onDblclick: function (e) {
            //                         console.log(e);
            //                     },
            //                 }
            //             },
            //             {
            //                 type: "button",
            //                 state: {
            //                     id: "button01",
            //                     type: "button",
            //                     value: "",
            //                     label: "search1",
            //                     onClick: function (e) {
            //                         // 모달팝업으로..
            //                     }
            //                 }
            //             },
            //             {
            //                 type: "input",
            //                 state: {
            //                     id: "input02",
            //                     type: "text",
            //                     value: "",
            //                     readonly: "readonly"
            //                 }
            //             }
            //         ]);
                    
            //         contents.push(code01);
            //     },
            // });

            // var test = new Control([
            //     {
            //         type: "button",
            //         state: {
            //             id: "button02",
            //             type: "button",
            //             label: "test11",
            //             onClick: function () {
            //                 this.setValue("label", "value");
            //             }
            //         }
            //     }
            // ]);

        </script>
    </body>
</html>